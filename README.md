mediawiki-extensions-microformat2
=================================

A [mediawiki][mediawiki] extension that allows writers to output [microformat2][microformat2]

# Mission

Enables Mediawiki users to easily published document containing microformat2 semantics.

# Usage

Once Installed, it adds following function:

    {{#uf2:htmltag|µfclass1|µfclass2|...|attr1="val1"|attr2="val2"|...|content}}

This function generates the following HTML code:

    <htmltag class="µfclass1 µfclass2" attr1="val1" attr2="val2#">content</htmltag>

# Examples

## Simple h-card

    <a class="h-card" href="http://waterpigs.co.uk">Barnaby Walters</a>

is generated by:

    {{#uf2:a|h-card|href="http://waterpigs.co.uk|Barnaby Walters}}

## Evil javascript

Obviously there are dangerous things that can be done. Thus the extension reuse the [Sanitizer.php](https://doc.wikimedia.org/mediawiki-core/master/php/html/Sanitizer_8php_source.html) regular expression to through out dangerous links.

For instance

    {{#uf2:a|h-card|href="javascript:alert('evil')"|evil link}}

will not output the link:

     <a class="h-card" >evil link</a>


# License

This project is free and open source.
The current license is the same as Mediawiki itself, ie [GNU GPLv2][GPLv2].

# Roadmap

## Features
1. generic function to generate safe HTML with microformat2 tags.
2. (planned) h-card
3. (planned) geo
4. (planned) product

## Requirements
* Mediawiki (>=1.23.6)
* Rights to install extensions

[microformat2]: http://microformats.org/
[mediawiki]: http://www.mediawiki.org
[GPLv2]: http://www.gnu.org/licenses/old-licenses/gpl-2.0.html

# Installation

Simply copy files into your extensions directory and add following snippets into your LocalSettings.php

    require_once( "$IP/extensions/UFMicroFormat2/UFMicroFormat2.php" );

# Security

The extension try to do safe checks to not authorize any html.

Thus &lt;a&gt; anchor links and &lt;img&gt; tags require to have at least a u-* classes or a h-card class.

&lt;time&gt; requires dt-* class.

Otherwise only following tags are authorised html tag:

     <div>
     <span>
     <abbr>
     <p> 

If $wgRawHtml is set and is true then any HTML is valid.